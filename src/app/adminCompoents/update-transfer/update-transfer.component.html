<div class="form-wrapper">
    <form [formGroup]="transferForm" (ngSubmit)="onSubmit()" class="create-transfer-form">
      <h2 class="mb-4 text-center">Update Transfer</h2>
  
      <!-- Reference Name -->
      <div class="form-group mb-3">
        <label>Reference Name</label>
        <input type="text" class="form-control" formControlName="referenceName"/>
      </div>
  
      <!-- Destination -->
      <div class="form-group mb-3">
        <label>Destination ID</label>
        <input type="number" class="form-control" formControlName="fkDestinationId"/>
      </div>
  
      <!-- Active Checkbox -->
      <div class="form-group mb-3">
        <label>
          <input type="checkbox" formControlName="isActive"/> Active
        </label>
      </div>
  
      <!-- Upload Image -->
      <div class="form-group mb-3">
        <label>Upload Image</label>
        <div class="d-flex align-items-center gap-3">
          <input type="file" #fileInput (change)="onFileSelected($event)"/>
          <div class="image-preview" *ngIf="imagePreview">
            <img [src]="imagePreview" alt="Preview" width="150"/>
            <button type="button" (click)="removeImage()">Remove</button>
          </div>
        </div>
      </div>
  
      <!-- Language Tabs -->
      <ul class="nav nav-tabs mb-3">
        <li class="nav-item" *ngFor="let lang of languages; let i = index">
          <a class="nav-link" [class.active]="i===0" data-bs-toggle="tab" [attr.href]="'#tab-'+lang">{{ lang.toUpperCase() }}</a>
        </li>
      </ul>
  
      <div class="tab-content">
        <div class="tab-pane fade" [class.show]="i===0" [class.active]="i===0" *ngFor="let lang of languages; let i=index" [attr.id]="'tab-'+lang">
          <!-- Translations -->
          <div [formGroup]="getTranslationGroup(lang)" class="mb-3">
            <label>Title</label>
            <input type="text" class="form-control" formControlName="name"/>
            <label>Description</label>
            <textarea class="form-control" formControlName="description"></textarea>
          </div>
  
          <!-- Prices -->
          <div formGroupName="prices" class="mb-3">
            <h6>Prices</h6>
            <div [formArrayName]="lang">
              <div *ngFor="let p of getPrices(lang).controls; let j=index" [formGroupName]="j" class="d-flex gap-2 mb-2">
                <input class="form-control" formControlName="title" placeholder="Title"/>
                <input type="number" class="form-control" formControlName="privtePrice" placeholder="Private"/>
                <input type="number" class="form-control" formControlName="sharedPrice" placeholder="Shared"/>
                <button type="button" class="btn btn-danger btn-sm" (click)="removePrice(lang,j)">Remove</button>
              </div>
            </div>
            <button type="button" class="btn btn-secondary btn-sm mt-1" (click)="addPrice(lang)">Add Price</button>
          </div>
  
          <!-- Includes -->
          <div formGroupName="includes" class="mb-3">
            <h6>Includes</h6>
            <div [formArrayName]="lang">
              <div *ngFor="let inc of getIncludes(lang).controls; let j=index" [formGroupName]="j" class="d-flex gap-2 mb-2">
                <input class="form-control" formControlName="text" placeholder="Include"/>
                <button type="button" class="btn btn-danger btn-sm" (click)="removeInclude(lang,j)">Remove</button>
              </div>
            </div>
            <button type="button" class="btn btn-secondary btn-sm mt-1" (click)="addInclude(lang)">Add Include</button>
          </div>
  
          <!-- Not Includes -->
          <div formGroupName="notIncludes" class="mb-3">
            <h6>Not Included</h6>
            <div [formArrayName]="lang">
              <div *ngFor="let ni of getNotIncludes(lang).controls; let j=index" [formGroupName]="j" class="d-flex gap-2 mb-2">
                <input class="form-control" formControlName="text" placeholder="Not Included"/>
                <button type="button" class="btn btn-danger btn-sm" (click)="removeNotInclude(lang,j)">Remove</button>
              </div>
            </div>
            <button type="button" class="btn btn-secondary btn-sm mt-1" (click)="addNotInclude(lang)">Add Not Included</button>
          </div>
  
          <!-- Highlights -->
          <div formGroupName="highlights" class="mb-3">
            <h6>Highlights</h6>
            <div [formArrayName]="lang">
              <div *ngFor="let h of getHighlights(lang).controls; let j=index" [formGroupName]="j" class="d-flex gap-2 mb-2">
                <input class="form-control" formControlName="text" placeholder="Highlight"/>
                <button type="button" class="btn btn-danger btn-sm" (click)="removeHighlight(lang,j)">Remove</button>
              </div>
            </div>
            <button type="button" class="btn btn-secondary btn-sm mt-1" (click)="addHighlight(lang)">Add Highlight</button>
          </div>
        </div>
      </div>
  
      <button type="submit" class="btn btn-primary w-100 mt-3">Update Transfer</button>
    </form>
  </div>
  